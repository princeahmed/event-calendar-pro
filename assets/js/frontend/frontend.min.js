window.Project=function(n,e,i,t){"use strict";var a={init:function(){i("#calendar").fullCalendar({header:{center:"prev,today,next",right:!1},height:"parent"}),i(e).on("click",".fc-day-top",a.loadEvent),i(".ecp-upload-img").on("click",a.uploadImage),i(".ecp-remove-image").on("click",a.removeImage),a.initDatePicker()},loadEvent:function(){var t=i("#ecp-widget-event-list-group"),e=n.wpecp.asset_url+"/images/icons/spinner.gif";t.html('<img src="'+e+'" style="height: 100px;margin: 0 auto;display: block;">');var a={date:i(this).data("date"),action:"ecp_get_event_list"};0<i(".fc-today").length&&i(".fc-today").removeClass("fc-today"),i(this).addClass("fc-today"),wp.ajax.send("ecp_get_event_list",{data:a,success:function(e){t.html(e.html)},error:function(e){console.log(e),t.html('<h3 class="text-center">No Event Found</h3>')}})},uploadImage:function(e){e.preventDefault();var n=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(){var e=n.state().get("selection").first(),t=e.toJSON().url,a=e.toJSON().id;i(".ecp-uploaded-image").attr("src",t),i("input[name=_thumbnail_id]").val(a),i(".ecp-remove-image").css("display","inline-block"),console.log(e.toJSON())})},removeImage:function(e){e.preventDefault(),i(".ecp-uploaded-image").attr("src",""),i("input[name=_thumbnail_id]").val(""),i(this).css("display","none")},initDatePicker:function(){i(e).ready(function(e){e(".ecp-date-calendar").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"yy-mm-dd",firstDay:7}),e(".ecp-time-calendar").timepicker({scrollbar:!0})})}};return i(e).ready(a.init),a}(window,document,jQuery);